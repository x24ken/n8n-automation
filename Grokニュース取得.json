{
  "name": "Grokãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ãã‚“",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "triggerAtDay": [
                6
              ],
              "triggerAtHour": 9
            },
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1168,
        -144
      ],
      "id": "99b8f2f3-faa2-47d9-b47a-4d9636e5aa9d",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "jsCode": "const today = new Date();\nconst sixDaysAgo = new Date();\nsixDaysAgo.setDate(today.getDate() - 6);\n\nconst formatDate = (date) =>\ndate.toISOString().slice(0, 10);\n\nconst startDate = formatDate(sixDaysAgo);\nconst endDate = formatDate(today);\n\nconst prompt = `${startDate}ã€œ${endDate}ã®é€±ã®AIæ´»ç”¨ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€ä¸»ã«ã¯ã€Œæ–°ã—ã„ãƒ„ãƒ¼ãƒ«ã®ç™»å ´ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã€å…·ä½“çš„ãªæ´»ç”¨æ–¹æ³•ã€ã‚’é›†ã‚ã¦ãã ã•ã„ã€‚\n\n## ãƒ«ãƒ¼ãƒ«\n- å„ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®æ¦‚è¦ã®æœ«å°¾ã«å…ƒãƒã‚¹ãƒˆã®URLã‚’æ›¸ã„ã¦ãã ã•ã„\n- ã€Œ## æ™®æ®µã‚¦ã‚©ãƒƒãƒã—ã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€å‚è€ƒã«ä¼¼ãŸç³»çµ±ã®æƒ…å ±æºã‹ã‚‰ãƒã‚¹ãƒˆã‚’é›†ã‚ã¦ãã ã•ã„\n\n## æ™®æ®µã‚¦ã‚©ãƒƒãƒã—ã¦ã„ã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ\nTestingCatalog News ğŸ—\n@testingcatalog\n\nAI Engineer\n@aiDotEngineer\n\nLangChain\n@LangChainAI\n\nHamel Husain\n@HamelHusain\n\nSam Altman\n@sama\n\nFirebase\n@Firebase\n\nGenspark (ã‚¸ã‚§ãƒ³ã‚¹ãƒ‘ãƒ¼ã‚¯) : æ—¥æœ¬å…¬å¼\n@genspark_japan\n\nAnthropic\n@AnthropicAI\n\nChatGPT\n@ChatGPTapp\n\nn8n.io\n@n8n_io\n\nLatent.Space\n@latentspacepod\n`\n\nreturn [{ json: { prompt, startDate, endDate } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -960,
        -144
      ],
      "id": "d819f039-2379-418b-ad9d-cfb22bcc1ad3",
      "name": "Code"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.x.ai/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "xAiApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "grok-4"
            },
            {
              "name": "search_parameters",
              "value": "={{ {   \"mode\": \"auto\",   \"from_date\": $json.startDate,   \"to_date\": $json.endDate,   \"max_search_results\": 30,   \"sources\": [{ \"type\": \"x\", \"post_favorite_count\": 60 }] } }}"
            },
            {
              "name": "messages",
              "value": "={{ [{ \"role\": \"user\", \"content\": $json.prompt }] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -752,
        -144
      ],
      "id": "80259aec-040e-4b55-b432-b084319af054",
      "name": "HTTP Request",
      "credentials": {
        "xAiApi": {
          "id": "LW8POSgDNk4hQBrr",
          "name": "xAi account"
        }
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "create",
        "owner": "={{ $json.githubOwner || 'your-username' }}",
        "repository": "={{ $json.githubRepo || 'obsidian-ai-news' }}",
        "filePath": "={{ $json.fileName }}",
        "fileContent": "={{ $json.fileContent }}",
        "commitMessage": "={{ $json.commitMessage }}"
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1.1,
      "position": [
        -48,
        -144
      ],
      "id": "6117592b-0191-498b-b628-abea7f964719",
      "name": "GitHub File Create",
      "credentials": {
        "githubApi": {
          "id": "github-token-id",
          "name": "GitHub Token"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const grokContent = $input.first().json.choices[0].message.content;\nconst today = new Date();\n\n// é€±ç•ªå·è¨ˆç®—\nconst startOfYear = new Date(today.getFullYear(), 0, 1);\nconst pastDaysOfYear = (today - startOfYear) / 86400000;\nconst weekNumber = Math.ceil((pastDaysOfYear + startOfYear.getDay() + 1) / 7);\n\n// ãƒ•ã‚¡ã‚¤ãƒ«åç”Ÿæˆ\nconst fileName = `AI-News/${today.toISOString().slice(0, 10)}-ai-weekly.md`;\n\n// ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼\nconst frontMatter = `---\ndate: ${today.toISOString().slice(0, 10)}\ntype: ai-weekly-news\nsource: grok-api\nweek: ${today.getFullYear()}-W${weekNumber.toString().padStart(2, '0')}\ntags: [ai, news, weekly, grok]\ncreated: \"${today.toISOString()}\"\nperiod: \"${$json.startDate} to ${$json.endDate}\"\n---`;\n\n// ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„\nconst markdownContent = frontMatter + `\n\n# ğŸ“° AIé€±åˆŠãƒ‹ãƒ¥ãƒ¼ã‚¹ - ${today.getFullYear()}å¹´${(today.getMonth()+1).toString().padStart(2, '0')}æœˆ${today.getDate().toString().padStart(2, '0')}æ—¥\n\n## ğŸ“Š ä»Šé€±ã®ã‚µãƒãƒªãƒ¼\n- **åé›†æœŸé–“**: ${$json.startDate} ã€œ ${$json.endDate}\n- **ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: 60ã„ã„ã­ä»¥ä¸Šã®äººæ°—æŠ•ç¨¿\n- **æƒ…å ±æº**: [[Grok API]]ã«ã‚ˆã‚‹è‡ªå‹•åé›†\n- **ç”Ÿæˆæ—¥æ™‚**: ${today.toLocaleString('ja-JP')}\n\n## ğŸ¤– AIé–¢é€£ã®æ³¨ç›®ãƒ‹ãƒ¥ãƒ¼ã‚¹\n\n${grokContent}\n\n## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯\n- [[AI-Tools]] - æ–°ã—ã„AIãƒ„ãƒ¼ãƒ«ä¸€è¦§\n- [[Weekly-Summary]] - é€±æ¬¡ã¾ã¨ã‚\n- [[Grok-Automation]] - è‡ªå‹•åé›†ã®ä»•çµ„ã¿\n\n## ğŸ·ï¸ ã‚¿ã‚°\n#AI #é€±åˆŠãƒ‹ãƒ¥ãƒ¼ã‚¹ #${today.getFullYear()} #${(today.getMonth()+1).toString().padStart(2, '0')}æœˆ #Grok #è‡ªå‹•åé›†\n\n---\n*ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯[[n8n]]ã¨[[Grok API]]ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã—ãŸ*\n`;\n\n// å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿\nreturn [{\n  json: {\n    fileName,\n    fileContent: markdownContent,\n    commitMessage: `Add AI weekly news - ${today.toISOString().slice(0, 10)}`,\n    // ãƒ‡ãƒãƒƒã‚°ç”¨\n    weekNumber,\n    today: today.toISOString()\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -512,
        -144
      ],
      "id": "f816d59d-13b7-49e3-ae4f-e5445eafa12a",
      "name": "Markdown Generator"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Markdown Generator": {
      "main": [
        [
          {
            "node": "GitHub File Create",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Markdown Generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "df450851-554f-433d-bf07-d631efcee43d",
  "meta": {
    "instanceId": "b6e990f210fa44870ca0bb1387222c6b940dbc8d2ab05eac96a53521aa849f5e"
  },
  "id": "w7FXk1nh1cAPx0v4",
  "tags": []
}